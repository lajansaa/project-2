<div class="ui secondary pointing menu">
  <a class="active item">Users</a>
  <div class="ui middle aligned divided list"></div>
  <a class="item">Data Sources</a>
</div>

<div class="ui middle aligned divided list">
  {{#each allUsers}}
  <div class="item">
    <div class="right floated content">
      <div id="edit-user" class="ui primary button">Edit</div>
      
      <div class="ui negative button delete-user-button" data="{{this.id}}">Delete</div>
      <div class="ui mini modal delete-{{this.id}}">
        <div class="content">
          <p>Are you sure you want to delete this {{this.name}}?</p>
        </div>
        <div class="actions">
          <div class="ui cancel negative button">Cancel</div>
          <form method="POST" action="/users/{{this.id}}/delete?_method=DELETE">
            <button class="ui approve positive button" type="submit">Yes</button>
          </form>
        </div>
      </div>

    </div>
    <div class="middle aligned content capitalize"><i class="fas fa-user"></i> {{this.name}}</div>
  </div>
  {{/each}}
</div>

<div class="ui tiny modal edit">
  <div class="header">Edit</div>
  <form id="new-user" class="ui form" method="POST" action="/users/new">
  <div class="field">
    <label>First Name</label>
    <input type="text" class="name" name="name" placeholder="First Name" required>
  </div>
  <div class="field">
    <label>Work Email</label>
    <input type="text" class="email" name="email" placeholder="Work Email" required>
  </div>
  <div class="ui error message" style="display:none"></div>
  <div class="field">
    <label>Create Password</label>
    <input type="password" class="password" name="password" placeholder="Create Password" required>
  </div>
  <button class="ui primary button" type="submit" >Request Access</button>
</form>
</div>



<script>
window.onload = function() {
  $('.delete-user-button').on('click', function() {
    console.log($(this).attr('data'));
    const deleteUser = '.ui.modal.delete-' + $(this).attr('data');
    $(`${deleteUser}`).modal('show');
  });
  $('#edit-user').on('click', function() {
    $('.modal.edit').modal('show');
  });
}
</script>